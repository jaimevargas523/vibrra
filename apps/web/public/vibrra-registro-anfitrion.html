<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>VIBRRA â€” Registro AnfitriÃ³n</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,700;0,900;1,700&family=Montserrat:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet"/>
<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   BASE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
*{margin:0;padding:0;box-sizing:border-box;}
:root{
  --gold:#FFE566;--gold-mid:#D4A017;--gold-dk:#A97010;
  --black:#080808;--card:#111111;--border:#1E1E1E;--border-2:#2A2A2A;
  --white:#F0EDE8;--soft:#B8B4AF;--muted:#8A8785;
  /* Alias legacy */
  --gold-light:var(--gold);--gold-dark:var(--gold-dk);--muted-2:var(--soft);
  --success:#2ECC71;--error:#E53935;--warn:#FF8F00;
}
html,body{height:100%;overflow:hidden;}
body{
  font-family:'Montserrat',sans-serif;
  background:var(--black);
  color:var(--white);
  display:flex;
  align-items:stretch;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LAYOUT PRINCIPAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.layout{display:flex;width:100%;height:100vh;}

/* PANEL IZQUIERDO â€” decorativo */
.left-panel{
  width:380px;flex-shrink:0;
  background:linear-gradient(160deg,#0D0900 0%,#050400 60%,#0A0600 100%);
  border-right:1px solid var(--border);
  display:flex;flex-direction:column;
  padding:48px 40px;
  position:relative;
  overflow:hidden;
}

.left-panel::before{
  content:'';position:absolute;
  top:-100px;right:-100px;
  width:400px;height:400px;
  background:radial-gradient(circle,rgba(212,160,23,0.08) 0%,transparent 70%);
  border-radius:50%;
}
.left-panel::after{
  content:'';position:absolute;
  bottom:-80px;left:-80px;
  width:300px;height:300px;
  background:radial-gradient(circle,rgba(212,160,23,0.05) 0%,transparent 70%);
  border-radius:50%;
}

.left-logo{
  font-family:'Playfair Display',serif;
  font-size:32px;font-weight:900;
  background:linear-gradient(135deg,#FFE566,#D4A017,#A97010);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;
  background-clip:text;letter-spacing:4px;
  margin-bottom:48px;
}

.step-list{flex:1;display:flex;flex-direction:column;gap:0;position:relative;z-index:1;}
.step-list::before{
  content:'';position:absolute;left:15px;top:20px;
  width:1px;bottom:20px;
  background:linear-gradient(to bottom,var(--gold-dark),var(--border));
}

.step-item{
  display:flex;align-items:flex-start;gap:16px;
  padding:14px 0;cursor:pointer;
  transition:all 0.2s;
}

.step-dot{
  width:32px;height:32px;border-radius:50%;
  flex-shrink:0;display:flex;align-items:center;justify-content:center;
  font-size:11px;font-weight:700;
  border:2px solid var(--border-2);
  background:var(--card);
  color:var(--muted);
  transition:all 0.3s;
  position:relative;z-index:1;
}
.step-dot.done{
  background:linear-gradient(135deg,#D4A017,#A97010);
  border-color:transparent;color:#080808;
  box-shadow:0 0 16px rgba(212,160,23,0.3);
}
.step-dot.active{
  background:transparent;
  border-color:var(--gold);
  color:var(--gold);
  box-shadow:0 0 0 4px rgba(212,160,23,0.1);
}

.step-info{padding-top:4px;}
.step-label{
  font-size:9px;letter-spacing:2px;text-transform:uppercase;
  color:var(--muted);margin-bottom:3px;
}
.step-name{font-size:13px;font-weight:600;color:var(--muted);transition:color 0.2s;}
.step-item.active .step-name{color:var(--white);}
.step-item.done .step-name{color:var(--gold);}
.step-desc{font-size:10px;color:var(--muted-2);margin-top:3px;line-height:1.5;}

.bono-preview{
  background:linear-gradient(135deg,rgba(212,160,23,0.08),rgba(212,160,23,0.03));
  border:1px solid rgba(212,160,23,0.2);
  border-radius:12px;padding:20px;
  position:relative;z-index:1;
}
.bono-title{font-size:10px;letter-spacing:2px;text-transform:uppercase;color:var(--gold);margin-bottom:6px;}
.bono-amount{
  font-family:'Playfair Display',serif;font-size:36px;font-weight:900;
  background:linear-gradient(135deg,#FFE566,#D4A017);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;
  background-clip:text;line-height:1;margin-bottom:8px;
}
.bono-desc{font-size:10px;color:var(--soft);line-height:1.6;}

/* PANEL DERECHO â€” formulario */
.right-panel{
  flex:1;overflow-y:auto;
  display:flex;flex-direction:column;
}

.form-container{
  max-width:560px;width:100%;
  margin:0 auto;
  padding:48px 40px 80px;
  flex:1;
}

/* PROGRESS BAR */
.progress-bar{
  height:2px;background:var(--border);
  border-radius:1px;overflow:hidden;
  margin-bottom:48px;
}
.progress-fill{
  height:100%;
  background:linear-gradient(90deg,var(--gold-dark),var(--gold-light));
  border-radius:1px;
  transition:width 0.5s cubic-bezier(0.4,0,0.2,1);
}

/* STEP HEADER */
.step-header{margin-bottom:32px;}
.step-eyebrow{
  font-size:9px;letter-spacing:3px;text-transform:uppercase;
  color:var(--gold);margin-bottom:8px;
  display:flex;align-items:center;gap:8px;
}
.step-eyebrow::before{content:'';width:20px;height:1px;background:var(--gold);}
.step-title{
  font-family:'Playfair Display',serif;
  font-size:32px;font-weight:700;line-height:1.1;margin-bottom:8px;
}
.step-subtitle{font-size:12px;color:var(--muted);line-height:1.7;}

/* FORM ELEMENTS */
.form-section{margin-bottom:28px;}
.form-section-title{
  font-size:9px;letter-spacing:2px;text-transform:uppercase;
  color:var(--muted);margin-bottom:14px;
  padding-bottom:10px;border-bottom:1px solid var(--border);
}

.form-grid{display:grid;grid-template-columns:1fr 1fr;gap:14px;}
.form-grid.full{grid-template-columns:1fr;}
.form-group{display:flex;flex-direction:column;gap:6px;}
.form-label{
  font-size:10px;letter-spacing:1px;text-transform:uppercase;
  color:var(--muted);
  display:flex;justify-content:space-between;align-items:center;
}
.form-required{color:var(--gold);font-size:8px;}
.form-hint{font-size:10px;color:var(--muted-2);margin-top:4px;line-height:1.5;}

.input{
  background:#0A0A0A;border:1px solid var(--border);
  border-radius:10px;color:var(--white);
  font-family:'Montserrat',sans-serif;font-size:13px;
  padding:12px 16px;outline:none;width:100%;
  transition:border-color 0.2s,box-shadow 0.2s;
}
.input:focus{border-color:var(--gold);box-shadow:0 0 0 3px rgba(212,160,23,0.08);}
.input::placeholder{color:var(--muted-2);}
.input.valid{border-color:rgba(29,185,84,0.4);}
.input.error{border-color:rgba(229,57,53,0.4);}

select.input{cursor:pointer;}
select.input option{background:#0F0F0F;}

.input-icon{position:relative;}
.input-icon .input{padding-right:42px;}
.input-icon-btn{
  position:absolute;right:14px;top:50%;transform:translateY(-50%);
  background:none;border:none;color:var(--muted);cursor:pointer;font-size:14px;
}

/* UPLOAD AREAS */
.upload-area{
  border:2px dashed var(--border-2);border-radius:12px;
  padding:28px;text-align:center;cursor:pointer;
  transition:all 0.2s;background:#0A0A0A;
  position:relative;overflow:hidden;
}
.upload-area:hover{border-color:rgba(212,160,23,0.4);background:rgba(212,160,23,0.02);}
.upload-area.has-file{border-color:rgba(29,185,84,0.3);border-style:solid;background:rgba(29,185,84,0.03);}
.upload-icon{font-size:28px;margin-bottom:10px;}
.upload-title{font-size:13px;font-weight:600;margin-bottom:4px;}
.upload-desc{font-size:10px;color:var(--muted);}
.upload-badge{
  position:absolute;top:10px;right:10px;
  background:rgba(29,185,84,0.15);border:1px solid rgba(29,185,84,0.3);
  color:var(--success);font-size:9px;font-weight:700;letter-spacing:1px;
  text-transform:uppercase;padding:3px 8px;border-radius:4px;
}

/* GENRES */
.genre-grid{display:flex;flex-wrap:wrap;gap:8px;}
.genre-chip{
  padding:7px 14px;border-radius:20px;
  border:1px solid var(--border-2);background:transparent;
  color:var(--muted);font-family:'Montserrat',sans-serif;
  font-size:11px;font-weight:600;cursor:pointer;
  transition:all 0.2s;
}
.genre-chip:hover{border-color:rgba(212,160,23,0.4);color:var(--gold);}
.genre-chip.selected{
  background:rgba(212,160,23,0.1);
  border-color:var(--gold);color:var(--gold);
}

/* RADIO / CHECKBOX */
.radio-group{display:flex;flex-direction:column;gap:8px;}
.radio-item{
  display:flex;align-items:center;gap:12px;
  padding:12px 16px;border-radius:10px;
  border:1px solid var(--border);background:#0A0A0A;
  cursor:pointer;transition:all 0.2s;
}
.radio-item:hover{border-color:rgba(212,160,23,0.3);}
.radio-item.selected{border-color:var(--gold);background:rgba(212,160,23,0.04);}
.radio-dot{
  width:18px;height:18px;border-radius:50%;
  border:2px solid var(--border-2);flex-shrink:0;
  display:flex;align-items:center;justify-content:center;
  transition:all 0.2s;
}
.radio-item.selected .radio-dot{
  border-color:var(--gold);background:var(--gold);
}
.radio-item.selected .radio-dot::after{
  content:'';width:6px;height:6px;border-radius:50%;background:#080808;
}
.radio-text{font-size:12px;font-weight:500;}
.radio-sub{font-size:10px;color:var(--soft);margin-top:2px;}

/* TOGGLE */
.toggle-row{
  display:flex;align-items:flex-start;gap:14px;
  padding:16px;border-radius:10px;
  border:1px solid var(--border);background:#0A0A0A;
  cursor:pointer;transition:border-color 0.2s;
  margin-bottom:10px;
}
.toggle-row:hover{border-color:rgba(212,160,23,0.2);}
.toggle-row.accepted{border-color:rgba(29,185,84,0.3);}
.toggle-switch{
  width:40px;height:22px;border-radius:11px;
  background:var(--border-2);position:relative;
  cursor:pointer;transition:background 0.2s;
  flex-shrink:0;margin-top:2px;border:none;
}
.toggle-switch.on{background:linear-gradient(135deg,#D4A017,#A97010);}
.toggle-switch::after{
  content:'';position:absolute;
  top:3px;left:3px;width:16px;height:16px;
  border-radius:50%;background:#fff;
  transition:left 0.2s;
}
.toggle-switch.on::after{left:21px;}
.toggle-text{}
.toggle-title{font-size:12px;font-weight:600;margin-bottom:3px;}
.toggle-desc{font-size:10px;color:var(--muted);line-height:1.6;}

/* DOCUMENT PREVIEW */
.doc-preview{
  display:flex;gap:12px;
}
.doc-card{
  flex:1;border:2px dashed var(--border-2);border-radius:10px;
  padding:20px;text-align:center;cursor:pointer;
  transition:all 0.2s;background:#0A0A0A;
}
.doc-card:hover{border-color:rgba(212,160,23,0.4);}
.doc-card.uploaded{border-color:rgba(29,185,84,0.3);border-style:solid;}
.doc-card-icon{font-size:24px;margin-bottom:8px;}
.doc-card-label{font-size:10px;font-weight:600;color:var(--muted);}

/* BANK SELECTOR */
.bank-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;}
.bank-item{
  padding:12px 8px;border-radius:10px;
  border:1px solid var(--border);background:#0A0A0A;
  text-align:center;cursor:pointer;transition:all 0.2s;
}
.bank-item:hover{border-color:rgba(212,160,23,0.3);}
.bank-item.selected{border-color:var(--gold);background:rgba(212,160,23,0.05);}
.bank-icon{font-size:20px;margin-bottom:6px;}
.bank-name{font-size:9px;font-weight:600;color:var(--muted);}
.bank-item.selected .bank-name{color:var(--gold);}

/* NAV BUTTONS */
.form-nav{
  display:flex;gap:12px;
  padding-top:28px;border-top:1px solid var(--border);
  margin-top:32px;
}
.btn-primary{
  flex:1;padding:14px;border-radius:10px;
  background:linear-gradient(135deg,#FFE566,#D4A017);
  border:none;color:#080808;
  font-family:'Montserrat',sans-serif;font-size:13px;font-weight:700;
  letter-spacing:1px;cursor:pointer;
  transition:opacity 0.2s,transform 0.1s;
}
.btn-primary:hover{opacity:0.9;transform:translateY(-1px);}
.btn-secondary{
  padding:14px 24px;border-radius:10px;
  background:transparent;border:1px solid var(--border);
  color:var(--muted);font-family:'Montserrat',sans-serif;
  font-size:13px;font-weight:600;cursor:pointer;transition:all 0.2s;
}
.btn-secondary:hover{border-color:var(--gold);color:var(--gold);}

/* STEP PANELS */
.step-panel{display:none;animation:fadeIn 0.3s ease;}
.step-panel.active{display:block;}
@keyframes fadeIn{from{opacity:0;transform:translateY(8px);}to{opacity:1;transform:translateY(0);}}

/* SUCCESS */
.success-screen{
  text-align:center;padding:20px 0;
}
.success-icon{
  width:80px;height:80px;border-radius:50%;
  background:linear-gradient(135deg,rgba(29,185,84,0.15),rgba(29,185,84,0.05));
  border:1px solid rgba(29,185,84,0.3);
  display:flex;align-items:center;justify-content:center;
  font-size:36px;margin:0 auto 24px;
  box-shadow:0 0 40px rgba(29,185,84,0.1);
}
.bono-card{
  background:linear-gradient(135deg,#1A1200,#0D0A00);
  border:1px solid rgba(212,160,23,0.3);
  border-radius:16px;padding:28px;
  margin:28px 0;position:relative;overflow:hidden;
}
.bono-card::before{
  content:'';position:absolute;
  top:-40px;right:-40px;width:150px;height:150px;
  background:radial-gradient(circle,rgba(212,160,23,0.1),transparent 70%);
  border-radius:50%;
}
.bono-card-amount{
  font-family:'Playfair Display',serif;
  font-size:52px;font-weight:900;
  background:linear-gradient(135deg,#FFE566,#D4A017,#A97010);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;
  background-clip:text;line-height:1;margin-bottom:8px;
}
.bono-vence{
  display:inline-flex;align-items:center;gap:6px;
  background:rgba(255,143,0,0.1);border:1px solid rgba(255,143,0,0.2);
  border-radius:20px;padding:4px 12px;
  font-size:10px;color:var(--warn);font-weight:600;
  letter-spacing:1px;text-transform:uppercase;margin-top:10px;
}

/* FIELD VALIDATION STATES */
.field-valid{color:var(--success);font-size:10px;margin-top:4px;}
.field-error{color:var(--error);font-size:10px;margin-top:4px;}

/* INFO BOX */
.info-box{
  background:rgba(212,160,23,0.04);
  border:1px solid rgba(212,160,23,0.15);
  border-left:3px solid var(--gold);
  border-radius:8px;padding:14px 16px;
  font-size:11px;color:var(--muted);line-height:1.7;
  margin-bottom:16px;
}
.info-box strong{color:var(--gold);}

/* SCROLLBAR */
.right-panel::-webkit-scrollbar{width:4px;}
.right-panel::-webkit-scrollbar-track{background:transparent;}
.right-panel::-webkit-scrollbar-thumb{background:var(--border-2);border-radius:2px;}

@media(max-width:900px){
  .left-panel{display:none;}
  .form-container{padding:32px 24px 80px;}
  .form-grid{grid-template-columns:1fr;}
  .bank-grid{grid-template-columns:repeat(2,1fr);}
}
</style>
</head>
<body>

<div class="layout">

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       PANEL IZQUIERDO
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="left-panel">
    <div class="left-logo">VIBRRA</div>

    <div class="step-list" id="stepList">

      <div class="step-item active" id="nav-0">
        <div class="step-dot active" id="dot-0">1</div>
        <div class="step-info">
          <div class="step-label">Paso 01</div>
          <div class="step-name">Cuenta</div>
          <div class="step-desc">Correo y contraseÃ±a</div>
        </div>
      </div>

      <div class="step-item" id="nav-1">
        <div class="step-dot" id="dot-1">2</div>
        <div class="step-info">
          <div class="step-label">Paso 02</div>
          <div class="step-name">Identidad</div>
          <div class="step-desc">CÃ©dula y documento</div>
        </div>
      </div>

      <div class="step-item" id="nav-2">
        <div class="step-dot" id="dot-2">3</div>
        <div class="step-info">
          <div class="step-label">Paso 03</div>
          <div class="step-name">Tributario</div>
          <div class="step-desc">RUT y rÃ©gimen fiscal</div>
        </div>
      </div>

      <div class="step-item" id="nav-3">
        <div class="step-dot" id="dot-3">4</div>
        <div class="step-info">
          <div class="step-label">Paso 04</div>
          <div class="step-name">Cuenta bancaria</div>
          <div class="step-desc">Para recibir retiros</div>
        </div>
      </div>

      <div class="step-item" id="nav-4">
        <div class="step-dot" id="dot-4">5</div>
        <div class="step-info">
          <div class="step-label">Paso 05</div>
          <div class="step-name">Legal</div>
          <div class="step-desc">TÃ©rminos y privacidad</div>
        </div>
      </div>

      <div class="step-item" id="nav-5">
        <div class="step-dot" id="dot-5">âœ“</div>
        <div class="step-info">
          <div class="step-label">Paso 06</div>
          <div class="step-name">Â¡Bono activado!</div>
          <div class="step-desc">$30.000 para empezar</div>
        </div>
      </div>

    </div>

    <!-- Banner suscripciÃ³n + bono -->
    <div class="bono-preview" style="display:flex;flex-direction:column;gap:0;padding:0;overflow:hidden;background:transparent;border:none;">

      <!-- Plan -->
      <div style="background:linear-gradient(135deg,rgba(212,160,23,.08),rgba(212,160,23,.03));border:1px solid rgba(212,160,23,.2);border-radius:14px;padding:16px 18px;margin-bottom:10px;">
        <div style="font-size:8px;letter-spacing:2px;text-transform:uppercase;color:var(--gold-mid);margin-bottom:8px;">ğŸ“‹ Plan de suscripciÃ³n</div>
        <div style="display:flex;align-items:baseline;gap:6px;margin-bottom:6px;">
          <span style="font-family:'Playfair Display',serif;font-size:22px;font-weight:900;background:linear-gradient(135deg,#FFE566,#D4A017);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;">$15.000</span>
          <span style="font-size:9px;color:var(--soft);">/ mes</span>
        </div>
        <div style="display:flex;align-items:center;gap:6px;background:rgba(46,204,113,.08);border:1px solid rgba(46,204,113,.2);border-radius:6px;padding:6px 10px;margin-bottom:8px;">
          <span style="font-size:10px;">ğŸ‰</span>
          <span style="font-size:10px;color:#2ECC71;font-weight:600;">Primer mes <strong>gratis</strong></span>
        </div>
        <div style="font-size:9px;color:var(--muted);line-height:1.6;">Acceso completo al dashboard, extensiÃ³n Chrome, sesiones ilimitadas y soporte.</div>
      </div>

      <!-- Bono -->
      <div style="background:linear-gradient(135deg,rgba(169,112,16,.12),rgba(169,112,16,.04));border:1px solid rgba(212,160,23,.25);border-radius:14px;padding:16px 18px;">
        <div style="font-size:8px;letter-spacing:2px;text-transform:uppercase;color:var(--gold-mid);margin-bottom:8px;">ğŸ Bono de activaciÃ³n</div>
        <div style="font-family:'Playfair Display',serif;font-size:28px;font-weight:900;background:linear-gradient(135deg,#FFE566,#D4A017,#A97010);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:4px;">$30.000</div>
        <div style="font-size:9px;color:var(--soft);line-height:1.6;">Se reclama desde el dashboard al crear tu primer establecimiento. El sistema verifica automÃ¡ticamente que se cumplan todos los requisitos antes de acreditarlo.</div>
      </div>

    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       PANEL DERECHO
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="right-panel">
    <div class="form-container">

      <!-- Progress bar -->
      <div class="progress-bar">
        <div class="progress-fill" id="progressBar" style="width:16.6%"></div>
      </div>

      <!-- â•â•â•â•â•â• PASO 1: CUENTA â•â•â•â•â•â• -->
      <div class="step-panel active" id="panel-0">
        <div class="step-header">
          <div class="step-eyebrow">Paso 01 de 05</div>
          <h2 class="step-title">Crea tu cuenta</h2>
          <p class="step-subtitle">Con este correo accederÃ¡s al dashboard de anfitriÃ³n desde cualquier dispositivo.</p>
        </div>

        <div class="form-section">
          <div class="form-grid full">
            <div class="form-group">
              <div class="form-label">Correo electrÃ³nico <span class="form-required">* Requerido</span></div>
              <input type="email" class="input" placeholder="tucorreo@ejemplo.com" id="f_email" oninput="validateEmail(this)"/>
              <div class="form-hint">RecibirÃ¡s notificaciones y reportes de sesiones aquÃ­.</div>
            </div>
            <div class="form-group">
              <div class="form-label">ContraseÃ±a <span class="form-required">* Requerido</span></div>
              <div class="input-icon">
                <input type="password" class="input" placeholder="MÃ­nimo 8 caracteres" id="f_pass" oninput="validatePass(this)"/>
                <button class="input-icon-btn" onclick="togglePass('f_pass',this)" type="button">ğŸ‘</button>
              </div>
            </div>
            <div class="form-group">
              <div class="form-label">Confirmar contraseÃ±a <span class="form-required">* Requerido</span></div>
              <div class="input-icon">
                <input type="password" class="input" placeholder="Repite tu contraseÃ±a" id="f_pass2"/>
                <button class="input-icon-btn" onclick="togglePass('f_pass2',this)" type="button">ğŸ‘</button>
              </div>
            </div>
          </div>
        </div>

        <div class="info-box">
          ğŸ”’ Tu contraseÃ±a se almacena de forma segura con cifrado bcrypt. VIBRRA nunca tendrÃ¡ acceso a ella en texto plano.
        </div>

        <div class="form-nav">
          <button class="btn-primary" onclick="nextStep()">Continuar â†’</button>
        </div>
      </div>

      <!-- â•â•â•â•â•â• PASO 2: IDENTIDAD â•â•â•â•â•â• -->
      <div class="step-panel" id="panel-1">
        <div class="step-header">
          <div class="step-eyebrow">Paso 02 de 05</div>
          <h2 class="step-title">VerificaciÃ³n<br/>de identidad</h2>
          <p class="step-subtitle">Requerido por la UIAF (Unidad de InformaciÃ³n y AnÃ¡lisis Financiero) para plataformas que procesan pagos en Colombia.</p>
        </div>

        <div class="form-section">
          <div class="form-section-title">Datos personales</div>
          <div class="form-grid">
            <div class="form-group">
              <div class="form-label">Nombres <span class="form-required">*</span></div>
              <input type="text" class="input" placeholder="Ej: Carlos AndrÃ©s"/>
            </div>
            <div class="form-group">
              <div class="form-label">Apellidos <span class="form-required">*</span></div>
              <input type="text" class="input" placeholder="Ej: RamÃ­rez GÃ³mez"/>
            </div>
            <div class="form-group">
              <div class="form-label">Tipo de documento <span class="form-required">*</span></div>
              <select class="input">
                <option value="">Seleccionar...</option>
                <option value="CC">CÃ©dula de ciudadanÃ­a</option>
                <option value="CE">CÃ©dula de extranjerÃ­a</option>
                <option value="PA">Pasaporte</option>
              </select>
            </div>
            <div class="form-group">
              <div class="form-label">NÃºmero de documento <span class="form-required">*</span></div>
              <input type="text" class="input" placeholder="Ej: 1234567890" id="f_cedula"/>
            </div>
            <div class="form-group">
              <div class="form-label">Fecha de nacimiento <span class="form-required">*</span></div>
              <input type="date" class="input"/>
            </div>
            <div class="form-group">
              <div class="form-label">Celular <span class="form-required">*</span></div>
              <input type="tel" class="input" placeholder="+57 300 000 0000"/>
            </div>
          </div>
        </div>

        <div class="form-section">
          <div class="form-section-title">Foto del documento de identidad</div>
          <div class="info-box">
            ğŸ“‹ Sube una foto clara de tu cÃ©dula. <strong>Ambas caras</strong> son obligatorias. La imagen debe ser legible y sin cortes.
          </div>
          <div class="doc-preview">
            <div class="doc-card" onclick="simulateUpload(this)" id="docFront">
              <div class="doc-card-icon">ğŸ“„</div>
              <div class="doc-card-label">Parte frontal</div>
            </div>
            <div class="doc-card" onclick="simulateUpload(this)" id="docBack">
              <div class="doc-card-icon">ğŸ“„</div>
              <div class="doc-card-label">Parte posterior</div>
            </div>
            <div class="doc-card" onclick="simulateUpload(this)" id="docSelfie">
              <div class="doc-card-icon">ğŸ¤³</div>
              <div class="doc-card-label">Selfie con cÃ©dula</div>
            </div>
          </div>
          <div style="font-size:10px;color:var(--muted);margin-top:10px;">JPG o PNG Â· MÃ¡x. 5MB por imagen Â· Fondo claro, buena iluminaciÃ³n</div>
        </div>

        <div class="form-nav">
          <button class="btn-secondary" onclick="prevStep()">â† AtrÃ¡s</button>
          <button class="btn-primary" onclick="nextStep()">Continuar â†’</button>
        </div>
      </div>

      <!-- â•â•â•â•â•â• PASO 4: TRIBUTARIO â•â•â•â•â•â• -->
      <div class="step-panel" id="panel-2">
        <div class="step-header">
          <div class="step-eyebrow">Paso 03 de 05</div>
          <h2 class="step-title">InformaciÃ³n<br/>tributaria</h2>
          <p class="step-subtitle">Requerido para la facturaciÃ³n electrÃ³nica ante la DIAN y el correcto cÃ¡lculo de retenciones en tus retiros.</p>
        </div>

        <div class="form-section">
          <div class="form-section-title">Tipo de persona</div>
          <div class="radio-group" id="personType">
            <div class="radio-item selected" onclick="selectRadio('personType',this)">
              <div class="radio-dot"></div>
              <div>
                <div class="radio-text">Persona natural</div>
                <div class="radio-sub">Operas con tu cÃ©dula como NIT. Aplica para la mayorÃ­a de anfitriones independientes.</div>
              </div>
            </div>
            <div class="radio-item" onclick="selectRadio('personType',this)">
              <div class="radio-dot"></div>
              <div>
                <div class="radio-text">Persona jurÃ­dica (empresa)</div>
                <div class="radio-sub">Tu establecimiento estÃ¡ constituido como SAS, S.A. u otra forma jurÃ­dica con NIT propio.</div>
              </div>
            </div>
          </div>
        </div>

        <div class="form-section">
          <div class="form-section-title">Datos tributarios</div>
          <div class="form-grid">
            <div class="form-group">
              <div class="form-label">NIT / CÃ©dula <span class="form-required">*</span></div>
              <input type="text" class="input" placeholder="Ej: 1234567890-1"/>
              <div class="form-hint">Para persona natural es tu cÃ©dula. Para empresa, el NIT con dÃ­gito verificador.</div>
            </div>
            <div class="form-group">
              <div class="form-label">RÃ©gimen tributario <span class="form-required">*</span></div>
              <select class="input">
                <option value="">Seleccionar...</option>
                <option>RÃ©gimen Simple (SIMPLE)</option>
                <option>RÃ©gimen Ordinario</option>
                <option>No Responsable de IVA</option>
              </select>
            </div>
          </div>
        </div>

        <div class="form-section">
          <div class="form-section-title">RUT vigente</div>
          <div class="info-box">
            ğŸ“ El RUT es el <strong>Registro Ãšnico Tributario</strong> expedido por la DIAN. Debe estar actualizado con tu actividad econÃ³mica. Si no tienes RUT, puedes obtenerlo gratis en <strong>dian.gov.co</strong>
          </div>
          <div class="upload-area" id="uploadRUT" onclick="simulateUploadRUT()">
            <div class="upload-icon">ğŸ“‹</div>
            <div class="upload-title">Subir RUT vigente</div>
            <div class="upload-desc">PDF o imagen clara Â· MÃ¡x. 5MB Â· Debe ser el documento original de la DIAN</div>
          </div>
        </div>

        <div class="form-section">
          <div class="form-section-title">Â¿Eres responsable de IVA?</div>
          <div class="radio-group" id="ivaType">
            <div class="radio-item selected" onclick="selectRadio('ivaType',this)">
              <div class="radio-dot"></div>
              <div>
                <div class="radio-text">No responsable de IVA</div>
                <div class="radio-sub">Ingresos brutos anuales menores a 3.500 UVT (~$171M COP en 2025). La mayorÃ­a de bares pequeÃ±os aplican aquÃ­.</div>
              </div>
            </div>
            <div class="radio-item" onclick="selectRadio('ivaType',this)">
              <div class="radio-dot"></div>
              <div>
                <div class="radio-text">Responsable de IVA (RÃ©gimen ComÃºn)</div>
                <div class="radio-sub">Superas el umbral o tienes registro especial ante la DIAN.</div>
              </div>
            </div>
          </div>
        </div>

        <div class="form-nav">
          <button class="btn-secondary" onclick="prevStep()">â† AtrÃ¡s</button>
          <button class="btn-primary" onclick="nextStep()">Continuar â†’</button>
        </div>
      </div>

      <!-- â•â•â•â•â•â• PASO 5: CUENTA BANCARIA â•â•â•â•â•â• -->
      <div class="step-panel" id="panel-3">
        <div class="step-header">
          <div class="step-eyebrow">Paso 04 de 05</div>
          <h2 class="step-title">Cuenta bancaria</h2>
          <p class="step-subtitle">AquÃ­ recibirÃ¡s tus retiros. La cuenta debe estar a tu nombre o al nombre de la empresa registrada.</p>
        </div>

        <div class="form-section">
          <div class="form-section-title">Selecciona tu banco</div>
          <div class="bank-grid" id="bankGrid">
            <div class="bank-item" onclick="selectBank(this)">
              <div class="bank-icon">ğŸ¦</div>
              <div class="bank-name">Bancolombia</div>
            </div>
            <div class="bank-item selected" onclick="selectBank(this)">
              <div class="bank-icon">ğŸ¦</div>
              <div class="bank-name">Banco BogotÃ¡</div>
            </div>
            <div class="bank-item" onclick="selectBank(this)">
              <div class="bank-icon">ğŸ¦</div>
              <div class="bank-name">Davivienda</div>
            </div>
            <div class="bank-item" onclick="selectBank(this)">
              <div class="bank-icon">ğŸ’š</div>
              <div class="bank-name">Nequi</div>
            </div>
            <div class="bank-item" onclick="selectBank(this)">
              <div class="bank-icon">ğŸ’™</div>
              <div class="bank-name">Daviplata</div>
            </div>
            <div class="bank-item" onclick="selectBank(this)">
              <div class="bank-icon">ğŸ¦</div>
              <div class="bank-name">BBVA</div>
            </div>
            <div class="bank-item" onclick="selectBank(this)">
              <div class="bank-icon">ğŸ¦</div>
              <div class="bank-name">Scotiabank</div>
            </div>
            <div class="bank-item" onclick="selectBank(this)">
              <div class="bank-icon">ğŸ¦</div>
              <div class="bank-name">AV Villas</div>
            </div>
            <div class="bank-item" onclick="selectBank(this)">
              <div class="bank-icon">ğŸ¦</div>
              <div class="bank-name">Otro banco</div>
            </div>
          </div>
        </div>

        <div class="form-section">
          <div class="form-section-title">Datos de la cuenta</div>
          <div class="form-grid">
            <div class="form-group">
              <div class="form-label">Tipo de cuenta <span class="form-required">*</span></div>
              <select class="input">
                <option value="">Seleccionar...</option>
                <option>Cuenta de ahorros</option>
                <option>Cuenta corriente</option>
                <option>Billetera digital (Nequi/Daviplata)</option>
              </select>
            </div>
            <div class="form-group">
              <div class="form-label">NÃºmero de cuenta <span class="form-required">*</span></div>
              <input type="text" class="input" placeholder="Ej: 123456789012"/>
            </div>
            <div class="form-group" style="grid-column:span 2;">
              <div class="form-label">Titular de la cuenta <span class="form-required">*</span></div>
              <input type="text" class="input" placeholder="Nombre exactamente como aparece en el banco"/>
              <div class="form-hint">Debe coincidir con el nombre del documento de identidad registrado.</div>
            </div>
          </div>
        </div>

        <div class="info-box">
          ğŸ’° Los retiros se procesan a travÃ©s de <strong>ePayco Split Payments</strong>. El tiempo estimado de acreditaciÃ³n es de <strong>1â€“3 dÃ­as hÃ¡biles</strong>. Se aplica retenciÃ³n en la fuente segÃºn tu rÃ©gimen tributario.
        </div>

        <div class="form-nav">
          <button class="btn-secondary" onclick="prevStep()">â† AtrÃ¡s</button>
          <button class="btn-primary" onclick="nextStep()">Continuar â†’</button>
        </div>
      </div>

      <!-- â•â•â•â•â•â• PASO 6: LEGAL â•â•â•â•â•â• -->
      <div class="step-panel" id="panel-4">
        <div class="step-header">
          <div class="step-eyebrow">Paso 05 de 05</div>
          <h2 class="step-title">TÃ©rminos y<br/>privacidad</h2>
          <p class="step-subtitle">Lee y acepta cada punto. Son obligatorios para activar tu cuenta y acreditar el bono de bienvenida.</p>
        </div>

        <div class="form-section">
          <div class="form-section-title">Aceptaciones obligatorias</div>

          <div class="toggle-row accepted" id="legal1" onclick="toggleLegal('legal1')">
            <button class="toggle-switch on" id="ts_legal1"></button>
            <div class="toggle-text">
              <div class="toggle-title">
                TÃ©rminos y Condiciones de VIBRRA
                <a href="vibrra-terminos.html" target="_blank" onclick="event.stopPropagation()" style="margin-left:8px;font-size:10px;font-weight:600;color:var(--gold-mid);text-decoration:none;letter-spacing:1px;text-transform:uppercase;border-bottom:1px solid rgba(212,160,23,.4);padding-bottom:1px;">Leer documento â†’</a>
              </div>
              <div class="toggle-desc">Acepto los tÃ©rminos de uso de la plataforma, incluyendo la comisiÃ³n del <strong style="color:var(--gold-mid);">30%</strong> sobre transacciones, las reglas de operaciÃ³n de sesiones, el modelo de cola por pujas y la polÃ­tica de bonos.</div>
            </div>
          </div>

          <div class="toggle-row" id="legal2" onclick="toggleLegal('legal2')">
            <button class="toggle-switch" id="ts_legal2"></button>
            <div class="toggle-text">
              <div class="toggle-title">
                PolÃ­tica de Tratamiento de Datos Personales
                <a href="vibrra-politica-datos.html" target="_blank" onclick="event.stopPropagation()" style="margin-left:8px;font-size:10px;font-weight:600;color:var(--gold-mid);text-decoration:none;letter-spacing:1px;text-transform:uppercase;border-bottom:1px solid rgba(212,160,23,.4);padding-bottom:1px;">Leer documento â†’</a>
              </div>
              <div class="toggle-desc">Autorizo el tratamiento de mis datos personales segÃºn la <strong style="color:var(--gold-mid);">Ley 1581 de 2012</strong> y el Decreto 1377 de 2013. Mis datos serÃ¡n usados para operar la plataforma y cumplir obligaciones legales.</div>
            </div>
          </div>

          <div class="toggle-row" id="legal3" onclick="toggleLegal('legal3')">
            <button class="toggle-switch" id="ts_legal3"></button>
            <div class="toggle-text">
              <div class="toggle-title">PolÃ­tica de Pagos y Retiros</div>
              <div class="toggle-desc">Entiendo que las <strong style="color:var(--gold-mid);">recargas del anfitriÃ³n</strong> se procesan vÃ­a Wompi/ePayco con tarifa ~2.68% + $900/tx. Los clientes no recargan por pasarela. VIBRRA puede retener pagos en caso de disputas o fraude detectado.</div>
            </div>
          </div>

          <div class="toggle-row" id="legal4" onclick="toggleLegal('legal4')">
            <button class="toggle-switch" id="ts_legal4"></button>
            <div class="toggle-text">
              <div class="toggle-title">CondiciÃ³n de publicidad en plataforma</div>
              <div class="toggle-desc">Acepto que hasta el <strong style="color:var(--gold);">10% de las canciones de mi cola</strong> por sesiÃ³n pueden ser canjes gratuitos de usuarios que vieron publicidad de marcas. Este es el modelo de operaciÃ³n de la plataforma y no es configurable.</div>
            </div>
          </div>
        </div>

        <div class="form-section">
          <div class="form-section-title">Comunicaciones (opcional)</div>

          <div class="toggle-row" id="legal5" onclick="toggleLegal('legal5')">
            <button class="toggle-switch" id="ts_legal5"></button>
            <div class="toggle-text">
              <div class="toggle-title">Reportes y novedades de VIBRRA</div>
              <div class="toggle-desc">Deseo recibir reportes semanales de mis sesiones, novedades de la plataforma y consejos para optimizar mis ingresos por correo electrÃ³nico.</div>
            </div>
          </div>
        </div>

        <div class="info-box">
          ğŸ›ï¸ VIBRRA es una plataforma registrada en Colombia. Esta aceptaciÃ³n tiene validez legal segÃºn la <strong>Ley 527 de 1999</strong> (comercio electrÃ³nico) y la <strong>Ley 1581 de 2012</strong> (protecciÃ³n de datos personales).
        </div>

        <div class="form-nav">
          <button class="btn-secondary" onclick="prevStep()">â† AtrÃ¡s</button>
          <button class="btn-primary" onclick="completeRegistration()" id="btnComplete">Completar registro â†’</button>
        </div>
      </div>

      <!-- â•â•â•â•â•â• PASO 7: Ã‰XITO â•â•â•â•â•â• -->
      <div class="step-panel" id="panel-5">
        <div class="success-screen">
          <div class="success-icon">ğŸ‰</div>

          <div class="step-eyebrow" style="justify-content:center;">Registro completado</div>
          <h2 class="step-title" style="text-align:center;margin-bottom:8px;">Â¡Bienvenido a<br/>VIBRRA!</h2>
          <p style="font-size:12px;color:var(--muted);line-height:1.7;margin-bottom:8px;">Tu cuenta ha sido creada y estÃ¡ en proceso de verificaciÃ³n. Mientras tanto, tu bono ya estÃ¡ disponible.</p>

          <div class="bono-card">
            <div style="font-size:10px;letter-spacing:2px;text-transform:uppercase;color:var(--gold);margin-bottom:8px;">ğŸ Bono de activaciÃ³n</div>
            <div class="bono-card-amount">$30.000</div>
            <div style="font-size:12px;color:var(--soft);margin-top:8px;line-height:1.6;">Para reclamarlo, registra tu primer establecimiento en el dashboard. El sistema verificarÃ¡ que se cumplan todos los requisitos.</div>
            <div style="margin-top:12px;display:flex;flex-direction:column;gap:6px;">
              <div style="display:flex;align-items:center;gap:8px;font-size:10px;color:var(--soft);">
                <span style="color:var(--gold);">â—‹</span> Registro completado
              </div>
              <div style="display:flex;align-items:center;gap:8px;font-size:10px;color:var(--soft);">
                <span style="color:var(--gold);">â—‹</span> Identidad verificada
              </div>
              <div style="display:flex;align-items:center;gap:8px;font-size:10px;color:var(--soft);">
                <span style="color:var(--gold);">â—‹</span> Al menos 1 establecimiento creado
              </div>
              <div style="display:flex;align-items:center;gap:8px;font-size:10px;color:var(--soft);">
                <span style="color:var(--gold);">â—‹</span> Sin suscripciÃ³n pagada aÃºn
              </div>
            </div>
            <div class="bono-vence">â± Disponible para reclamar 30 dÃ­as despuÃ©s del registro</div>
          </div>

          <div style="background:var(--card);border:1px solid var(--border);border-radius:12px;padding:20px;margin-bottom:24px;text-align:left;">
            <div style="font-size:10px;letter-spacing:2px;text-transform:uppercase;color:var(--muted);margin-bottom:14px;">PrÃ³ximos pasos</div>
            <div style="display:flex;flex-direction:column;gap:12px;">
              <div style="display:flex;gap:12px;align-items:flex-start;">
                <div style="width:24px;height:24px;border-radius:50%;background:rgba(29,185,84,0.15);border:1px solid rgba(29,185,84,0.3);display:flex;align-items:center;justify-content:center;font-size:10px;flex-shrink:0;color:var(--success);">âœ“</div>
                <div style="font-size:12px;"><strong>VerificaciÃ³n de identidad</strong><br/><span style="color:var(--muted);font-size:10px;">Revisaremos tu documentaciÃ³n en 24â€“48 horas hÃ¡biles.</span></div>
              </div>
              <div style="display:flex;gap:12px;align-items:flex-start;">
                <div style="width:24px;height:24px;border-radius:50%;background:rgba(212,160,23,0.1);border:1px solid rgba(212,160,23,0.2);display:flex;align-items:center;justify-content:center;font-size:10px;flex-shrink:0;color:var(--gold);">2</div>
                <div style="font-size:12px;"><strong>Instala la extensiÃ³n Chrome</strong><br/><span style="color:var(--muted);font-size:10px;">Necesaria para controlar YouTube desde tu dashboard.</span></div>
              </div>
              <div style="display:flex;gap:12px;align-items:flex-start;">
                <div style="width:24px;height:24px;border-radius:50%;background:rgba(212,160,23,0.1);border:1px solid rgba(212,160,23,0.2);display:flex;align-items:center;justify-content:center;font-size:10px;flex-shrink:0;color:var(--gold);">3</div>
                <div style="font-size:12px;"><strong>Imprime tu QR permanente</strong><br/><span style="color:var(--muted);font-size:10px;">Disponible en tu dashboard. ColÃ³calo en mesas y barra.</span></div>
              </div>
              <div style="display:flex;gap:12px;align-items:flex-start;">
                <div style="width:24px;height:24px;border-radius:50%;background:rgba(212,160,23,0.1);border:1px solid rgba(212,160,23,0.2);display:flex;align-items:center;justify-content:center;font-size:10px;flex-shrink:0;color:var(--gold);">4</div>
                <div style="font-size:12px;"><strong>Â¡Inicia tu primera sesiÃ³n!</strong><br/><span style="color:var(--muted);font-size:10px;">Usa tu bono de $30.000 para pujar tus primeras canciones.</span></div>
              </div>
            </div>
          </div>

          <button class="btn-primary" style="width:100%;padding:16px;font-size:14px;" onclick="alert('Redirigiendo al dashboard...')">
            Ir a mi dashboard â†’
          </button>
        </div>
      </div>

    </div><!-- /form-container -->
  </div><!-- /right-panel -->

</div><!-- /layout -->

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   VIBRRA â€” Registro AnfitriÃ³n
   PatrÃ³n: recoger todos los datos en memoria â†’
   un solo batch al finalizar (createUser + setDoc)
   No se crea ninguna cuenta hasta el paso final.
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

/* â”€â”€ Estado global del formulario â”€â”€ */
const formData = {
  // Paso 1 â€” Cuenta
  email:    '',
  password: '',

  // Paso 2 â€” Identidad
  nombres:       '',
  apellidos:     '',
  tipoDoc:       '',
  numeroDoc:     '',
  fechaNac:      '',
  celular:       '',
  docFrontal:    null,  // File object
  docPosterior:  null,
  selfie:        null,

  // Paso 3 â€” Tributario
  tipoPersona:   'natural',
  nit:           '',
  regimen:       '',
  responsableIva: false,
  rutFile:       null,

  // Paso 4 â€” Cuenta bancaria
  banco:         '',
  tipoCuenta:    '',
  numeroCuenta:  '',
  titularCuenta: '',

  // Paso 5 â€” Legal
  aceptaTerminos:   false,
  aceptaDatos:      false,
  aceptaPagos:      false,
  aceptaPublicidad: false,
  recibeReportes:   false,
};

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   NAVEGACIÃ“N
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let currentStep = 0;
const totalSteps = 5; // pasos 0â€“4, el 5 es pantalla de Ã©xito

document.addEventListener('DOMContentLoaded', () => {
  updateUI();
});

function nextStep() {
  if (!validarPasoActual()) return;
  recogerDatosPaso(currentStep);
  if (currentStep < totalSteps) {
    markDone(currentStep);
    currentStep++;
    updateUI();
  }
}

function prevStep() {
  if (currentStep > 0) {
    currentStep--;
    updateUI();
  }
}

function updateUI() {
  document.querySelectorAll('.step-panel').forEach(p => p.classList.remove('active'));
  const panel = document.getElementById('panel-' + currentStep);
  if (panel) panel.classList.add('active');

  document.querySelectorAll('.step-item').forEach((item, i) => {
    item.classList.remove('active');
    if (i === currentStep) item.classList.add('active');
  });

  const pct = currentStep === totalSteps
    ? 100
    : ((currentStep + 1) / (totalSteps + 1)) * 100;
  document.getElementById('progressBar').style.width = pct + '%';

  document.querySelector('.right-panel').scrollTo({ top: 0, behavior: 'smooth' });
}

function markDone(step) {
  const dot  = document.getElementById('dot-' + step);
  const item = document.getElementById('nav-' + step);
  if (dot)  { dot.classList.remove('active'); dot.classList.add('done'); dot.textContent = 'âœ“'; }
  if (item) { item.classList.remove('active'); item.classList.add('done'); }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RECOLECCIÃ“N DE DATOS POR PASO
   Se llama al avanzar â€” guarda en formData
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function recogerDatosPaso(paso) {
  switch (paso) {
    case 0:
      formData.email    = document.getElementById('f_email')?.value?.trim() || '';
      formData.password = document.getElementById('f_pass')?.value || '';
      break;
    case 1:
      formData.nombres      = document.querySelector('#panel-1 input[placeholder="Ej: Carlos AndrÃ©s"]')?.value?.trim() || '';
      formData.apellidos    = document.querySelector('#panel-1 input[placeholder="Ej: RamÃ­rez GÃ³mez"]')?.value?.trim() || '';
      formData.tipoDoc      = document.querySelector('#panel-1 select')?.value || '';
      formData.numeroDoc    = document.getElementById('f_cedula')?.value?.trim() || '';
      formData.celular      = document.querySelector('#panel-1 input[type="tel"]')?.value?.trim() || '';
      formData.fechaNac     = document.querySelector('#panel-1 input[type="date"]')?.value || '';
      break;
    case 2:
      formData.nit          = document.querySelector('#panel-2 input[placeholder="Ej: 1234567890-1"]')?.value?.trim() || '';
      formData.regimen      = document.querySelector('#panel-2 select')?.value || '';
      formData.tipoPersona  = document.querySelector('#personType .radio-item.selected .radio-text')?.textContent?.includes('jurÃ­dica') ? 'juridica' : 'natural';
      formData.responsableIva = !!document.querySelector('#ivaType .radio-item.selected .radio-text')?.textContent?.includes('Responsable');
      break;
    case 3:
      formData.banco         = document.querySelector('.bank-item.selected .bank-name')?.textContent?.trim() || '';
      formData.tipoCuenta    = document.querySelector('#panel-3 select')?.value || '';
      formData.numeroCuenta  = document.querySelector('#panel-3 input[type="text"]:not([placeholder*="Nombre"])')?.value?.trim() || '';
      formData.titularCuenta = document.querySelector('#panel-3 input[placeholder*="Nombre exactamente"]')?.value?.trim() || '';
      break;
    case 4:
      formData.aceptaTerminos   = document.getElementById('ts_legal1')?.classList.contains('on') || false;
      formData.aceptaDatos      = document.getElementById('ts_legal2')?.classList.contains('on') || false;
      formData.aceptaPagos      = document.getElementById('ts_legal3')?.classList.contains('on') || false;
      formData.aceptaPublicidad = document.getElementById('ts_legal4')?.classList.contains('on') || false;
      formData.recibeReportes   = document.getElementById('ts_legal5')?.classList.contains('on') || false;
      break;
  }
  console.log(`[VIBRRA] Paso ${paso} guardado en memoria:`, JSON.stringify(formData, null, 2));
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   VALIDACIÃ“N POR PASO
   Retorna true si puede avanzar
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function validarPasoActual() {
  switch (currentStep) {
    case 0: {
      const email = document.getElementById('f_email')?.value?.trim();
      const pass  = document.getElementById('f_pass')?.value;
      const pass2 = document.getElementById('f_pass2')?.value;
      if (!email || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
        mostrarError('f_email', 'Ingresa un correo vÃ¡lido'); return false;
      }
      if (!pass || pass.length < 8) {
        mostrarError('f_pass', 'MÃ­nimo 8 caracteres'); return false;
      }
      if (pass !== pass2) {
        mostrarError('f_pass2', 'Las contraseÃ±as no coinciden'); return false;
      }
      return true;
    }
    case 1: {
      const cedula = document.getElementById('f_cedula')?.value?.trim();
      if (!cedula) { mostrarError('f_cedula', 'NÃºmero de documento requerido'); return false; }
      return true;
    }
    case 4: {
      const required = ['ts_legal1','ts_legal2','ts_legal3','ts_legal4'];
      const ok = required.every(id => document.getElementById(id)?.classList.contains('on'));
      if (!ok) { alert('Debes aceptar todas las condiciones obligatorias para continuar.'); return false; }
      return true;
    }
    default:
      return true;
  }
}

function mostrarError(inputId, msg) {
  const el = document.getElementById(inputId);
  if (el) {
    el.classList.add('error');
    el.focus();
    // Mostrar tooltip de error si no existe
    let hint = el.parentElement.querySelector('.error-msg');
    if (!hint) {
      hint = document.createElement('div');
      hint.className = 'error-msg';
      hint.style.cssText = 'font-size:10px;color:var(--error);margin-top:4px;';
      el.parentElement.appendChild(hint);
    }
    hint.textContent = msg;
    setTimeout(() => { hint.remove(); el.classList.remove('error'); }, 3000);
  }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   COMPLETAR REGISTRO
   AquÃ­ se crea TODO en Firebase de una vez.
   En producciÃ³n: createUserWithEmailAndPassword
   + setDoc con todos los datos recopilados.
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
async function completeRegistration() {
  if (!validarPasoActual()) return;
  recogerDatosPaso(4);

  const btn = document.getElementById('btnComplete');
  btn.disabled = true;
  btn.textContent = 'Creando cuenta...';

  try {
    /* â”€â”€ PRODUCCIÃ“N (descomentar cuando se integre Firebase) â”€â”€
    const auth = getAuth();
    const db   = getFirestore();

    // 1. Crear cuenta Firebase Auth
    const cred = await createUserWithEmailAndPassword(auth, formData.email, formData.password);
    const uid  = cred.user.uid;

    // 2. Subir documentos KYC a Storage
    const storage = getStorage();
    const docFrontalUrl = formData.docFrontal
      ? await uploadBytes(ref(storage, `kyc/${uid}/frontal`), formData.docFrontal)
          .then(snap => getDownloadURL(snap.ref))
      : null;

    // 3. Crear documento AnfitriÃ³n en Firestore (un solo setDoc)
    await setDoc(doc(db, 'Usuarios', uid), {
      tipo:           'anfitrion',
      email:          formData.email,
      nombres:        formData.nombres,
      apellidos:      formData.apellidos,
      tipoDoc:        formData.tipoDoc,
      numeroDoc:      formData.numeroDoc,
      fechaNac:       formData.fechaNac,
      celular:        formData.celular,
      tipoPersona:    formData.tipoPersona,
      nit:            formData.nit,
      regimen:        formData.regimen,
      responsableIva: formData.responsableIva,
      banco:          formData.banco,
      tipoCuenta:     formData.tipoCuenta,
      numeroCuenta:   formData.numeroCuenta,
      titularCuenta:  formData.titularCuenta,
      legal: {
        aceptaTerminos:   formData.aceptaTerminos,
        aceptaDatos:      formData.aceptaDatos,
        aceptaPagos:      formData.aceptaPagos,
        aceptaPublicidad: formData.aceptaPublicidad,
        recibeReportes:   formData.recibeReportes,
        fechaAceptacion:  new Date().toISOString(),
      },
      kyc: {
        estado:       'pendiente',
        docFrontalUrl,
      },
      saldoReal:  0,
      saldoBono:  30000,  // bono de bienvenida
      estado:     'pendiente_verificacion',
      creadoEn:   serverTimestamp(),
    });
    â”€â”€ FIN PRODUCCIÃ“N â”€â”€ */

    // â”€â”€ SIMULACIÃ“N (prototipo HTML) â”€â”€
    await new Promise(r => setTimeout(r, 1800)); // simular latencia
    console.log('[VIBRRA] Cuenta creada con datos:', formData);

    // Ir a pantalla de Ã©xito
    markDone(currentStep);
    currentStep = totalSteps;
    updateUI();

    // Marcar Ã©xito en nav
    const dot = document.getElementById('dot-' + (totalSteps - 1));
    const nav = document.getElementById('nav-' + (totalSteps - 1));
    if (dot) { dot.classList.add('done'); dot.textContent = 'ğŸ'; }
    if (nav) { nav.classList.add('done'); }

  } catch (err) {
    console.error('[VIBRRA] Error al crear cuenta:', err);
    btn.disabled    = false;
    btn.textContent = 'Completar registro â†’';
    alert('OcurriÃ³ un error al crear tu cuenta. Intenta de nuevo.');
  }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   INTERACCIONES UI
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function togglePass(id, btn) {
  const inp = document.getElementById(id);
  if (inp.type === 'password') { inp.type = 'text'; btn.textContent = 'ğŸ™ˆ'; }
  else { inp.type = 'password'; btn.textContent = 'ğŸ‘'; }
}

function validateEmail(el) {
  const valid = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(el.value);
  el.className = 'input ' + (el.value.length > 0 ? (valid ? 'valid' : 'error') : '');
}

function validatePass(el) {
  el.className = 'input ' + (el.value.length >= 8 ? 'valid' : (el.value.length > 0 ? 'error' : ''));
}

function simulateUpload(el) {
  el.classList.add('uploaded');
  el.innerHTML = '<div class="doc-card-icon">âœ…</div><div class="doc-card-label" style="color:var(--success);">Cargado</div>';
}

function simulateUploadRUT() {
  const el = document.getElementById('uploadRUT');
  el.classList.add('has-file');
  el.innerHTML = `
    <div class="upload-badge">âœ“ Cargado</div>
    <div class="upload-icon">ğŸ“‹</div>
    <div class="upload-title" style="color:var(--success);">RUT cargado correctamente</div>
    <div class="upload-desc">rut_2025.pdf Â· 1.1MB Â· Listo</div>
  `;
}

function toggleGenre(el) { el.classList.toggle('selected'); }

function selectRadio(groupId, el) {
  document.querySelectorAll('#' + groupId + ' .radio-item').forEach(r => r.classList.remove('selected'));
  el.classList.add('selected');
}

function selectBank(el) {
  document.querySelectorAll('.bank-item').forEach(b => b.classList.remove('selected'));
  el.classList.add('selected');
}

function toggleLegal(id) {
  const row    = document.getElementById(id);
  const toggle = document.getElementById('ts_' + id);
  row.classList.toggle('accepted');
  toggle.classList.toggle('on');
}

</script>
<!-- qrcode-generator (sin CDN externo no funciona, se carga desde unpkg) -->
<script src="https://unpkg.com/qrcode-generator@1.4.4/qrcode.js"></script>
<script>
// Re-dibujar QR si la lib cargÃ³ despuÃ©s del init

</script>
</body>
</html>
